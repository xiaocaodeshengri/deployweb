{"remainingRequest":"D:\\workFiles\\deployweb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workFiles\\deployweb\\src\\components\\About.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workFiles\\deployweb\\src\\components\\About.vue","mtime":1583747397511},{"path":"D:\\workFiles\\deployweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport '@ckeditor/ckeditor5-build-decoupled-document/build/translations/zh-cn'\r\nimport DecoupledEditor from '@ckeditor/ckeditor5-build-decoupled-document'\r\n\r\nexport default {\r\n  inject: ['reload'],\r\n  data(){\r\n    return {\r\n      editor: DecoupledEditor,\r\n      editorConfig: {\r\n          language: 'zh-cn',\r\n          fontSize: {\r\n              options: [8, 10, 'default', 14, 16, 18, 20, 22, 24, 26, 28, 32, 48]\r\n          },\r\n          fontFamily:{\r\n              options: ['宋体', '仿宋', '微软雅黑', '黑体', '仿宋_GB2312', '楷体', '隶书', '幼圆']\r\n          }\r\n      },\r\n      dialog: false,\r\n      loading: false,\r\n      title: '',\r\n      manager: '',\r\n      managerEmail: '',\r\n      deployFlag: '',\r\n      deployVersion: '',\r\n      aboutPage: '',\r\n      aboutForm: {\r\n          blog_title: '',\r\n          about: ''\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initAbout()\r\n    this.getFlagVersionInfo()\r\n  },\r\n  methods: {\r\n    editorOnReady(editor){\r\n        editor.ui.getEditableElement().parentElement.insertBefore(\r\n            editor.ui.view.toolbar.element,\r\n            editor.ui.getEditableElement()\r\n        );\r\n        editor.plugins.get('FileRepository').createUploadAdapter = function(loader){\r\n            let val = editor.getData();\r\n            return{\r\n                upload: async function(){\r\n                    return await loader.file.then(f => {\r\n                        const F = new FileReader();\r\n                        F.readAsArrayBuffer(f);\r\n                        return new Promise(resolve => {\r\n                            F.onload = function(){\r\n                                resolve(F.result)\r\n                            };\r\n                        })\r\n                    }).then(bufAsArray => {\r\n                        return{\r\n                            default: ''\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }, \r\n    getRole(num){\r\n      this.role = localStorage.getItem(\"role\")\r\n      if(this.role >= num){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    initAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.title = response.data['res']['title']\r\n        this.manager = response.data['res']['manager']\r\n        this.managerEmail = response.data['res']['managerEmail']\r\n        this.aboutPage = response.data['res']['aboutPage']\r\n      })\r\n    },\r\n    getFlagVersionInfo(){\r\n      this.$axios.get(this.$api.flagData).then((response) => {\r\n        this.deployFlag = response.data['res']['DEPLOY']['flag']\r\n        this.deployVersion = response.data['res']['DEPLOY']['version']\r\n      })\r\n    },\r\n    editAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.aboutForm.blog_title = response.data['res']['title']\r\n        this.aboutForm.about = response.data['res']['aboutPage']\r\n      })\r\n      this.dialog = true\r\n    },\r\n    editAboutBtn(){\r\n      this.$confirm('确定修改预发布环境规范吗？')\r\n          .then(_ => {\r\n          this.loading = true;\r\n          let data = {\r\n              \"blog_title\": this.aboutForm.blog_title,\r\n              \"about\": this.aboutForm.about\r\n          }\r\n          this.$axios.put(this.$api.aboutPage, data).then(response => {\r\n              if (this.messageShow(this, response)){\r\n                  this.loading = false;\r\n                  this.dialog = false;\r\n                  this.reload();\r\n              }\r\n          }).catch((error) => {\r\n              this.loading = false;\r\n              this.dialog = false;\r\n              this.errorMessageShow(this, error.response);\r\n          })\r\n      })\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["About.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"About.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"about\">\r\n    <div class=\"page-header\">\r\n      <el-row :gutter=\"1\">\r\n        <el-col :span=\"2\"><h1>关于</h1></el-col>\r\n        <el-col v-show=\"getRole(9)\" :span=\"2\" style=padding-top:21px>\r\n          <el-button @click.native=\"editAbout()\" type=\"primary\" icon=\"el-icon-edit\" size=\"small\" circle plain></el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-8 mdui-typo\">\r\n        <ul>\r\n            <li>管理员:</li>{{ manager }}\r\n            <li>管理员邮箱:</li>{{ managerEmail }}\r\n            <li v-if=\"deployFlag === 1\">当前版本正在部署:</li>{{ deployVersion }}\r\n        </ul>\r\n        </div>\r\n        <div class=\"col-sm-8 mdui-typo\">\r\n            <h3>预发布环境规范</h3>\r\n              <ul>\r\n                  <span v-html=\"aboutPage\"></span>\r\n              </ul>\r\n        </div>\r\n    </div>\r\n\r\n      <el-drawer\r\n      title=\"关于页面配置\"\r\n      :visible.sync=\"dialog\"\r\n      direction=\"rtl\"\r\n      custom-class=\"demo-drawer\"\r\n      ref=\"drawer\"\r\n      size=\"80%\">\r\n          <div class=\"demo-drawer__content\">\r\n              <el-form :model=\"aboutForm\" ref=\"aboutForm\" label-width=\"100px\">\r\n                  <el-form-item label=\"标题\" prop=\"blog_title\" size=\"small\">\r\n                      <el-input v-model=\"aboutForm.blog_title\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"关于\" prop=\"about\" size=\"small\">\r\n                      <div>\r\n                      <ckeditor :editor=\"editor\" @ready=\"editorOnReady\" v-model=\"aboutForm.about\" :config=\"editorConfig\">\r\n                      </ckeditor>\r\n                      <el-divider></el-divider>\r\n                      </div>\r\n                  </el-form-item>\r\n              </el-form>\r\n              <div class=\"demo-drawer__footer\">\r\n              <el-button type=\"primary\" @click.native=\"editAboutBtn()\" :loading=\"loading\">{{ loading ? '提交中 ...' : '确 定' }}</el-button>\r\n              <el-button @click=\"dialog = false\">取 消</el-button>\r\n              </div>\r\n          </div>\r\n      </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '@ckeditor/ckeditor5-build-decoupled-document/build/translations/zh-cn'\r\nimport DecoupledEditor from '@ckeditor/ckeditor5-build-decoupled-document'\r\n\r\nexport default {\r\n  inject: ['reload'],\r\n  data(){\r\n    return {\r\n      editor: DecoupledEditor,\r\n      editorConfig: {\r\n          language: 'zh-cn',\r\n          fontSize: {\r\n              options: [8, 10, 'default', 14, 16, 18, 20, 22, 24, 26, 28, 32, 48]\r\n          },\r\n          fontFamily:{\r\n              options: ['宋体', '仿宋', '微软雅黑', '黑体', '仿宋_GB2312', '楷体', '隶书', '幼圆']\r\n          }\r\n      },\r\n      dialog: false,\r\n      loading: false,\r\n      title: '',\r\n      manager: '',\r\n      managerEmail: '',\r\n      deployFlag: '',\r\n      deployVersion: '',\r\n      aboutPage: '',\r\n      aboutForm: {\r\n          blog_title: '',\r\n          about: ''\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initAbout()\r\n    this.getFlagVersionInfo()\r\n  },\r\n  methods: {\r\n    editorOnReady(editor){\r\n        editor.ui.getEditableElement().parentElement.insertBefore(\r\n            editor.ui.view.toolbar.element,\r\n            editor.ui.getEditableElement()\r\n        );\r\n        editor.plugins.get('FileRepository').createUploadAdapter = function(loader){\r\n            let val = editor.getData();\r\n            return{\r\n                upload: async function(){\r\n                    return await loader.file.then(f => {\r\n                        const F = new FileReader();\r\n                        F.readAsArrayBuffer(f);\r\n                        return new Promise(resolve => {\r\n                            F.onload = function(){\r\n                                resolve(F.result)\r\n                            };\r\n                        })\r\n                    }).then(bufAsArray => {\r\n                        return{\r\n                            default: ''\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }, \r\n    getRole(num){\r\n      this.role = localStorage.getItem(\"role\")\r\n      if(this.role >= num){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    initAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.title = response.data['res']['title']\r\n        this.manager = response.data['res']['manager']\r\n        this.managerEmail = response.data['res']['managerEmail']\r\n        this.aboutPage = response.data['res']['aboutPage']\r\n      })\r\n    },\r\n    getFlagVersionInfo(){\r\n      this.$axios.get(this.$api.flagData).then((response) => {\r\n        this.deployFlag = response.data['res']['DEPLOY']['flag']\r\n        this.deployVersion = response.data['res']['DEPLOY']['version']\r\n      })\r\n    },\r\n    editAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.aboutForm.blog_title = response.data['res']['title']\r\n        this.aboutForm.about = response.data['res']['aboutPage']\r\n      })\r\n      this.dialog = true\r\n    },\r\n    editAboutBtn(){\r\n      this.$confirm('确定修改预发布环境规范吗？')\r\n          .then(_ => {\r\n          this.loading = true;\r\n          let data = {\r\n              \"blog_title\": this.aboutForm.blog_title,\r\n              \"about\": this.aboutForm.about\r\n          }\r\n          this.$axios.put(this.$api.aboutPage, data).then(response => {\r\n              if (this.messageShow(this, response)){\r\n                  this.loading = false;\r\n                  this.dialog = false;\r\n                  this.reload();\r\n              }\r\n          }).catch((error) => {\r\n              this.loading = false;\r\n              this.dialog = false;\r\n              this.errorMessageShow(this, error.response);\r\n          })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>"]}]}