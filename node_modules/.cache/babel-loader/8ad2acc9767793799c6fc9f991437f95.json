{"remainingRequest":"D:\\workFiles\\deployweb\\node_modules\\babel-loader\\lib\\index.js!D:\\workFiles\\deployweb\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workFiles\\deployweb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workFiles\\deployweb\\src\\components\\About.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workFiles\\deployweb\\src\\components\\About.vue","mtime":1583747397511},{"path":"D:\\workFiles\\deployweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workFiles\\deployweb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\workFiles\\\\deployweb\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport '@ckeditor/ckeditor5-build-decoupled-document/build/translations/zh-cn';\nimport DecoupledEditor from '@ckeditor/ckeditor5-build-decoupled-document';\nexport default {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      editor: DecoupledEditor,\n      editorConfig: {\n        language: 'zh-cn',\n        fontSize: {\n          options: [8, 10, 'default', 14, 16, 18, 20, 22, 24, 26, 28, 32, 48]\n        },\n        fontFamily: {\n          options: ['宋体', '仿宋', '微软雅黑', '黑体', '仿宋_GB2312', '楷体', '隶书', '幼圆']\n        }\n      },\n      dialog: false,\n      loading: false,\n      title: '',\n      manager: '',\n      managerEmail: '',\n      deployFlag: '',\n      deployVersion: '',\n      aboutPage: '',\n      aboutForm: {\n        blog_title: '',\n        about: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.initAbout();\n    this.getFlagVersionInfo();\n  },\n  methods: {\n    editorOnReady: function editorOnReady(editor) {\n      editor.ui.getEditableElement().parentElement.insertBefore(editor.ui.view.toolbar.element, editor.ui.getEditableElement());\n\n      editor.plugins.get('FileRepository').createUploadAdapter = function (loader) {\n        var val = editor.getData();\n        return {\n          upload: function () {\n            var _upload = _asyncToGenerator(\n            /*#__PURE__*/\n            regeneratorRuntime.mark(function _callee() {\n              return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.next = 2;\n                      return loader.file.then(function (f) {\n                        var F = new FileReader();\n                        F.readAsArrayBuffer(f);\n                        return new Promise(function (resolve) {\n                          F.onload = function () {\n                            resolve(F.result);\n                          };\n                        });\n                      }).then(function (bufAsArray) {\n                        return {\n                          default: ''\n                        };\n                      });\n\n                    case 2:\n                      return _context.abrupt(\"return\", _context.sent);\n\n                    case 3:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            function upload() {\n              return _upload.apply(this, arguments);\n            }\n\n            return upload;\n          }()\n        };\n      };\n    },\n    getRole: function getRole(num) {\n      this.role = localStorage.getItem(\"role\");\n\n      if (this.role >= num) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    initAbout: function initAbout() {\n      var _this = this;\n\n      this.$axios.get(this.$api.aboutPage).then(function (response) {\n        _this.title = response.data['res']['title'];\n        _this.manager = response.data['res']['manager'];\n        _this.managerEmail = response.data['res']['managerEmail'];\n        _this.aboutPage = response.data['res']['aboutPage'];\n      });\n    },\n    getFlagVersionInfo: function getFlagVersionInfo() {\n      var _this2 = this;\n\n      this.$axios.get(this.$api.flagData).then(function (response) {\n        _this2.deployFlag = response.data['res']['DEPLOY']['flag'];\n        _this2.deployVersion = response.data['res']['DEPLOY']['version'];\n      });\n    },\n    editAbout: function editAbout() {\n      var _this3 = this;\n\n      this.$axios.get(this.$api.aboutPage).then(function (response) {\n        _this3.aboutForm.blog_title = response.data['res']['title'];\n        _this3.aboutForm.about = response.data['res']['aboutPage'];\n      });\n      this.dialog = true;\n    },\n    editAboutBtn: function editAboutBtn() {\n      var _this4 = this;\n\n      this.$confirm('确定修改预发布环境规范吗？').then(function (_) {\n        _this4.loading = true;\n        var data = {\n          \"blog_title\": _this4.aboutForm.blog_title,\n          \"about\": _this4.aboutForm.about\n        };\n\n        _this4.$axios.put(_this4.$api.aboutPage, data).then(function (response) {\n          if (_this4.messageShow(_this4, response)) {\n            _this4.loading = false;\n            _this4.dialog = false;\n\n            _this4.reload();\n          }\n        }).catch(function (error) {\n          _this4.loading = false;\n          _this4.dialog = false;\n\n          _this4.errorMessageShow(_this4, error.response);\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["About.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"about\">\r\n    <div class=\"page-header\">\r\n      <el-row :gutter=\"1\">\r\n        <el-col :span=\"2\"><h1>关于</h1></el-col>\r\n        <el-col v-show=\"getRole(9)\" :span=\"2\" style=padding-top:21px>\r\n          <el-button @click.native=\"editAbout()\" type=\"primary\" icon=\"el-icon-edit\" size=\"small\" circle plain></el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <div class=\"row\">\r\n        <div class=\"col-sm-8 mdui-typo\">\r\n        <ul>\r\n            <li>管理员:</li>{{ manager }}\r\n            <li>管理员邮箱:</li>{{ managerEmail }}\r\n            <li v-if=\"deployFlag === 1\">当前版本正在部署:</li>{{ deployVersion }}\r\n        </ul>\r\n        </div>\r\n        <div class=\"col-sm-8 mdui-typo\">\r\n            <h3>预发布环境规范</h3>\r\n              <ul>\r\n                  <span v-html=\"aboutPage\"></span>\r\n              </ul>\r\n        </div>\r\n    </div>\r\n\r\n      <el-drawer\r\n      title=\"关于页面配置\"\r\n      :visible.sync=\"dialog\"\r\n      direction=\"rtl\"\r\n      custom-class=\"demo-drawer\"\r\n      ref=\"drawer\"\r\n      size=\"80%\">\r\n          <div class=\"demo-drawer__content\">\r\n              <el-form :model=\"aboutForm\" ref=\"aboutForm\" label-width=\"100px\">\r\n                  <el-form-item label=\"标题\" prop=\"blog_title\" size=\"small\">\r\n                      <el-input v-model=\"aboutForm.blog_title\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"关于\" prop=\"about\" size=\"small\">\r\n                      <div>\r\n                      <ckeditor :editor=\"editor\" @ready=\"editorOnReady\" v-model=\"aboutForm.about\" :config=\"editorConfig\">\r\n                      </ckeditor>\r\n                      <el-divider></el-divider>\r\n                      </div>\r\n                  </el-form-item>\r\n              </el-form>\r\n              <div class=\"demo-drawer__footer\">\r\n              <el-button type=\"primary\" @click.native=\"editAboutBtn()\" :loading=\"loading\">{{ loading ? '提交中 ...' : '确 定' }}</el-button>\r\n              <el-button @click=\"dialog = false\">取 消</el-button>\r\n              </div>\r\n          </div>\r\n      </el-drawer>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport '@ckeditor/ckeditor5-build-decoupled-document/build/translations/zh-cn'\r\nimport DecoupledEditor from '@ckeditor/ckeditor5-build-decoupled-document'\r\n\r\nexport default {\r\n  inject: ['reload'],\r\n  data(){\r\n    return {\r\n      editor: DecoupledEditor,\r\n      editorConfig: {\r\n          language: 'zh-cn',\r\n          fontSize: {\r\n              options: [8, 10, 'default', 14, 16, 18, 20, 22, 24, 26, 28, 32, 48]\r\n          },\r\n          fontFamily:{\r\n              options: ['宋体', '仿宋', '微软雅黑', '黑体', '仿宋_GB2312', '楷体', '隶书', '幼圆']\r\n          }\r\n      },\r\n      dialog: false,\r\n      loading: false,\r\n      title: '',\r\n      manager: '',\r\n      managerEmail: '',\r\n      deployFlag: '',\r\n      deployVersion: '',\r\n      aboutPage: '',\r\n      aboutForm: {\r\n          blog_title: '',\r\n          about: ''\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initAbout()\r\n    this.getFlagVersionInfo()\r\n  },\r\n  methods: {\r\n    editorOnReady(editor){\r\n        editor.ui.getEditableElement().parentElement.insertBefore(\r\n            editor.ui.view.toolbar.element,\r\n            editor.ui.getEditableElement()\r\n        );\r\n        editor.plugins.get('FileRepository').createUploadAdapter = function(loader){\r\n            let val = editor.getData();\r\n            return{\r\n                upload: async function(){\r\n                    return await loader.file.then(f => {\r\n                        const F = new FileReader();\r\n                        F.readAsArrayBuffer(f);\r\n                        return new Promise(resolve => {\r\n                            F.onload = function(){\r\n                                resolve(F.result)\r\n                            };\r\n                        })\r\n                    }).then(bufAsArray => {\r\n                        return{\r\n                            default: ''\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }, \r\n    getRole(num){\r\n      this.role = localStorage.getItem(\"role\")\r\n      if(this.role >= num){\r\n        return true\r\n      }else{\r\n        return false\r\n      }\r\n    },\r\n    initAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.title = response.data['res']['title']\r\n        this.manager = response.data['res']['manager']\r\n        this.managerEmail = response.data['res']['managerEmail']\r\n        this.aboutPage = response.data['res']['aboutPage']\r\n      })\r\n    },\r\n    getFlagVersionInfo(){\r\n      this.$axios.get(this.$api.flagData).then((response) => {\r\n        this.deployFlag = response.data['res']['DEPLOY']['flag']\r\n        this.deployVersion = response.data['res']['DEPLOY']['version']\r\n      })\r\n    },\r\n    editAbout(){\r\n      this.$axios.get(this.$api.aboutPage).then((response) => {\r\n        this.aboutForm.blog_title = response.data['res']['title']\r\n        this.aboutForm.about = response.data['res']['aboutPage']\r\n      })\r\n      this.dialog = true\r\n    },\r\n    editAboutBtn(){\r\n      this.$confirm('确定修改预发布环境规范吗？')\r\n          .then(_ => {\r\n          this.loading = true;\r\n          let data = {\r\n              \"blog_title\": this.aboutForm.blog_title,\r\n              \"about\": this.aboutForm.about\r\n          }\r\n          this.$axios.put(this.$api.aboutPage, data).then(response => {\r\n              if (this.messageShow(this, response)){\r\n                  this.loading = false;\r\n                  this.dialog = false;\r\n                  this.reload();\r\n              }\r\n          }).catch((error) => {\r\n              this.loading = false;\r\n              this.dialog = false;\r\n              this.errorMessageShow(this, error.response);\r\n          })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}